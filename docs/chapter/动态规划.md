# 动态规划

动态规划（Dynamic Programming）是一种分阶段求解策略问题的数学思想。

动态规划中包含三个重要概念：最优子结构、边界、状态转移公式。

- 最优子结构，求解一个问题时，首先要找出问题的最优子结构；
- 边界，边界是最简的最优子结构，无需再简化便可得到结果；如果一个问题没有边界，将无法得到有限的结果；
- 状态转换方程，是阶段与阶段直接的转换关系

动态规划类似于高中数学的数学归纳法

## 求解过程

1. 确定状态

	研究最优策略的最后一步，转化为子问题，定义最优子结构

2. 转换方式

	根据子问题定义和最后一步求解过程，抽象出状态转换方程

3. 初始条件和边界情况

	细心，考虑周全

4. 计算顺序

	利用之前的计算结果

## 动态规划题目特点

1. 计数

    - 有多少种方式走到右下角
    - 有多少种方法选出k个数使得和为sum

2. 求最值

    - 从左上角走到右下角路径的最大数字和
    - 求最长上升子序列的长度

3. 求存在性

    - 青蛙过河，能否跳到最后一个位置
    - 取石子游戏，先手是否必胜
    - 能不能选出k个数使得和是sum

## 常见动态规划类型

- 坐标型动态规划(20%) 重点
- 序列型动态规划(20%) 重点
- 划分型动态规划(20%) 重点
- 区间型动态规划(15%) 重点
- 背包型动态规划(10%)
- 双序列型动态规划(5%)
- 博弈型动态规划(5%)
- 综合性动态规划(5%)
- 位操作型动态规划 (了解)
- 状态压缩DP (了解)

## 坐标型动态规划

坐标记录状态
可以用滚动数组进行空间优化

- 硬币组合（一维坐标）

	足够的2，5，7面值的硬币，问最少用多少个硬币能组合出面值27（有多少种方式凑出面值27） (力扣518零钱兑换II)

	f(i) 表示凑出i元所有的最少硬币数（凑出i元的方案数）

- 不同路径（二维坐标）

	机器人从左上角走到右下角，有多少种走法

	最小路径和（力扣64）

- 炸弹袭击(领扣553)

	二维矩阵中的格子为空，敌人，墙，炸弹可以放在任意空地上，炸弹会杀死同一行和同一列没有墙阻隔的敌人；问一个炸弹杀死的最大敌人数

- 最长序列（属于坐标型动态规划）

    最长上升子序列(LIS)（力扣300）一维

    最长公共子序列(LCS)（力扣1143）二维

## 序列型动态规划

f[0] 往往表示空序列
有时候会有K维序列，表示K种状态

- 房子涂色

	k种颜色，费用不一样，相邻房子颜色不能相同，求最小花费

- 打家劫舍（力扣198,213）

- [六道股票问题](../articles/六道股票问题总结.md)

  - [121.买卖股票的最佳时机](../algorithms/101-200/121.%20买卖股票的最佳时机.md)
  - [122.买卖股票的最佳时机II](../algorithms/101-200/122.%20买卖股票的最佳时机%20II.md)
  - [123.买卖股票的最佳时机III](../algorithms/101-200/123.%20买卖股票的最佳时机%20III.md)
  - [188.买卖股票的最佳时机IV](../algorithms/101-200/188.%20买卖股票的最佳时机%20IV.md)
  - [309.最佳买卖股票时机含冷冻期](../algorithms/301-400/309.%20最佳买卖股票时机含冷冻期.md)
  - [714.买卖股票的最佳时机含手续费](../algorithms/701-800/714.%20买卖股票的最佳时机含手续费.md)

- 俄罗斯套娃（力扣354题）

    O(N^2) 优化成 O(NlogN) TODO

## 划分型动态规划

给定长度为N的序列，要求划分为若干段

- 段数不限，或指定K段
- 每一段满足一定的性质（最小代价，能不能等）

做法：

- 类似于序列型动态规划，但是通常要加上段数信息
- 一般用f[i + 1][k]来记录前i个元素（元素0~i-1,f[0][k]表示空序列）分成k段的性质，如最小代价
- 关注最后一段，枚举最后一段可能情况 + 前面序列, 求最优策略

注意：划分型动态规划每一段序列一定是连续的

- 数字规律一类题目（一维坐标）

  把一个完整的数字分成几个，满足一定的性质

  - 完全平方数（力扣279）
  - 整数拆分（力扣343）

- 解码方法（力扣91题）

	一条包含字母 A-Z 的消息通过以下方式进行了编码：'A' -> 1；'B' -> 2；...；'Z' -> 26
	给定一个只包含数字的非空字符串，请计算解码方法的总数。

- 分割回文串(力扣132,1278)

	给定一个字符串 s，将 s 分割成一些子串，使每个子串都是回文串。返回符合要求的最少分割次数。（力扣132） 划分型动态规划
	修改字符组成k个回文子串的最小修改代价（力扣1278. 分割回文串 III） 划分型动态规划 + k组信息

- 抄写书籍（领扣437），分割数组的最大值(力扣410)

    N本书，每本有A[i]页；K个抄写员，每个抄写员可以抄连续的几本书；抄写员抄写速度一样；问最少需要多长时间抄写完毕。

    可以用贪心，动态规划更通用，如果稍微变形，贪心就不可以用了

- 兼职规划找工作（力扣1235），出租车派单（力扣1235拓展）

    如果有k个人员(出租车)怎么解？

## 区间型动态规划

一般用二维数组表示区间

区间问题只需要考虑 区间头和区间尾

区间型动态规划一般都是hard难度，不过掌握规律，其实也不难

- 最长回文子序列（力扣516题）

- 石子游戏（力扣877题）

- 扰乱字符串（力扣87题）

- 戳气球(力扣312题)

记忆化搜索跟递推比较

- 记忆化搜索没法优化，递推可以用滚动数组优化

## 背包型动态规划

N个物品，有重量数组w,和价值数组v,背包承重为M

- 求背包能装的最大重量（领扣92）
- 求背包能装的最大价值(领扣125)

01背包问题，从最大体积向0体积枚举；
完全背包问题，从0体积向最大体积枚举；

- 一和零 （力扣474）

    01背包的变种

## 双序列型动态规划

- 最长公共子序列（LCS）（力扣1143题）

    应用：比较两篇文章相似程度，前后版本修改等等

- 交错字符串（力扣97题）

- 编辑距离（力扣72题）

- 不同的子序列(力扣115题)

- 正则表达式匹配（力扣10，44）

## 博弈型动态规划

博弈型动态规划跟其他类型动态规划不同：博弈型往往从第一步开始分析

- 石子游戏 （力扣877）

## 位操作型动态规划

- 比特位计数(力扣338)

	给定N，求0，1，2，...,N每个数的二进制表示中1的个数

## 状态压缩DP（了解 hard）

AcWing 91. 最短Hamilton路径（最短哈密顿距离）


力扣 1349. 参加考试的最大学生数

## 动态规划求最优解

以01背包为例
